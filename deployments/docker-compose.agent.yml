version: '3.8'

services:
  test-agent:
    build:
      context: ../../servereye
      dockerfile: deployments/Dockerfile.agent
    container_name: servereye-test-agent
    restart: unless-stopped
    environment:
      - SERVER_KEY=test_server_12345
      - API_KEY=srv_87317a58def6bdecd3448f58dd317ac4
      - KAFKA_BROKERS=kafka:9092
      - COMMAND_TOPIC_PREFIX=cmd
      - RESPONSE_TOPIC=servereye.responses
      - METRICS_TOPIC_PREFIX=metrics
      - LOG_LEVEL=debug
    networks:
      - servereye-network
    volumes:
      - ../logs:/var/log/servereye

networks:
  servereye-network:
    external: true
